## Cache设置
- Block Cache
  用于缓存常用的未压缩块内容（与此同时, 操作系统Page Cache也会缓存经过压缩的原始数据）
  ```
  rocksdb::BlockBasedTableOptions table_options;
  table_options.block_cache = rocksdb::NewLRUCache(100 * 1048576); // 100MB uncompressed cache

  rocksdb::Options options;
  options.table_factory.reset(rocksdb::NewBlockBasedTableFactory(table_options));
  rocksdb::DB* db;
  rocksdb::DB::Open(options, name, &db);
  ... use the db ...
  ```

- 非Cache大批量读
  禁用缓存以便大容量读取(Scan场景)不会替换大部分缓存内容
  ```
  rocksdb::ReadOptions options;
  options.fill_cache = false;
  rocksdb::Iterator* it = db->NewIterator(options);
  for (it->SeekToFirst(); it->Valid(); it->Next()) {
      ...
  }
  ```

- Partitioned Index Filters(分区索引缓存)
  - 1.更高的缓存命中率:分区允许以更细的粒度加载索引/过滤器，从而有效地利用缓存空间，而不是用大索引/块污染缓存空间
  - 2.更少的IO util:当索引/过滤器分区缓存丢失时，只需要从磁盘加载一个分区，这与读取SST文件的整个索引/过滤器相比，磁盘负载更轻
  ```
  rocksdb::BlockBasedTableOptions table_options;
  table_options.block_cache = rocksdb::NewLRUCache(100 * 1048576); // 100MB uncompressed cache
  table_options.index_type = rocksdb::BlockBasedTableOptions::IndexType::kTwoLevelIndexSearch;
  table_options.partition_filters = true;
  table_options.metadata_block_size = 4096;
  table_options.pin_top_level_index_and_filter = true;
  table_options.cache_index_and_filter_blocks = true;
  table_options.cache_index_and_filter_blocks_with_high_priority = true;
  table_options.pin_l0_filter_and_index_blocks_in_cache = true;
  ```
